"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var logger_1 = require("../server/logger");
var models_1 = require("../model/models");
var logger = new logger_1.default("Controller");
var Controller = (function () {
    function Controller() {
        logger.info("Controller constructed");
    }
    Controller.prototype.safeHandle = function (req, res, next, fn) {
        var result = new models_1.APIResult();
        try {
            fn(req, res, next, result);
        }
        catch (err) {
            result = this.badRequest(result, err);
            this.handleResult(res, next, result);
        }
    };
    Controller.prototype.handleResult = function (res, next, result) {
        result.successful = (result.statusCode == 200 /* OK */) ? true : false;
        res.json(result);
    };
    Controller.prototype.internalError = function (result, error) {
        result.statusCode = 500 /* InternalServerError */;
        result.errorMessage = error;
        return result;
    };
    Controller.prototype.badRequest = function (result, error) {
        result.statusCode = 400 /* BadRequest */;
        result.errorMessage = error;
        return result;
    };
    return Controller;
}());
exports.Controller = Controller;
//# sourceMappingURL=controller.js.map